<?php

/**
 * ExpedientesEgresados
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    sig
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class ExpedientesEgresados extends BaseExpedientesEgresados
{

    public function obtenerUltimaDerivacion() {
    	$q = Doctrine_Query::create()
			->select('ed.*')
			->from('ExpedientesDerivaciones ed')
	    	->where('ed.idexpediente = ?', $this->getIdexpediente())
	    	->orderBy('ed.idderivacion DESC');

		return $q->fetchOne();  	
    }
    	
    public function obtenerPrimeraDerivacion() {
    	$q = Doctrine_Query::create()
			->select('ed.*')
			->from('ExpedientesDerivaciones ed')
	    	->where('ed.idexpediente = ?', $this->getIdexpediente())
	    	->orderBy('ed.idderivacion ASC');

		return $q->fetchOne();  	
    }
        
	public function getIdDocumentaciones()
	{
  		$arrayDocumentaciones = array();
		$q = Doctrine_Query::create()
  			->select('d.*')
    		->from('DocumentacionExpedientes d')
    		->where('d.idexpediente = ?', $this->getIdexpediente())
    		->fetchArray();
    		
    	foreach ($q as $k => $v){
    		$arrayDocumentaciones[$k] = $v['iddocumentacion'];
    	}
		
		return $arrayDocumentaciones;
  	}  
  		
  	public function getIdCondiciones()
	{
  		$arrayCondiciones = array();
		$q = Doctrine_Query::create()
  			->select('d.*')
    		->from('CondicionesExpedientes d')
    		->where('d.idexpediente = ?', $this->getIdexpediente())
    		->fetchArray();
    		
    	foreach ($q as $k => $v){
    		$arrayCondiciones[$k] = $v['idcondicion'];
    	}
		
		return $arrayCondiciones;
  	}  	
}
