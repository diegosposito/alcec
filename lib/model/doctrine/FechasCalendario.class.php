<?php

/**
 * FechasCalendario
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    sig
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class FechasCalendario extends BaseFechasCalendario
{
    // Obtiene los llamados que tiene una fecha
    public function obtenerLlamados()
    {
    	$q = Doctrine_Query::create()
  			->select('l.*')
    		->from('LlamadosTurno l')
    		->where('l.idfecha = '.$this->getIdfecha());
		
		return $q->execute();
    }

    // Obtiene el ciclo lectivo que tiene una fecha
    public function obtenerCicloLectivo()
    {
    	$q = Doctrine_Query::create()
  			->select('p.*, c.ciclo as ciclo')
    		->from('PeriodosCiclos p')
    		->innerjoin('p.CiclosLectivos c on p.idciclo=c.id')
    		->where('p.idfecha = '.$this->getIdfecha());
		
		return $q->fetchOne();
    } 	

    // Obtiene el periodo de cursada que tiene una fecha
    public function obtenerPeriodoCursada()
    {
    	$q = Doctrine_Query::create()
    		->select('p.*')
    		->from('PeriodosCursadas p')
    		->where('p.idfecha = '.$this->getIdfecha());
    	
    	return $q->fetchOne();
    }    
}
