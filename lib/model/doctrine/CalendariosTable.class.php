<?php

/**
 * CalendariosTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class CalendariosTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object CalendariosTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('Calendarios');
    }

	// Busca el alumno
  	public function obtenerCalendario($idfacultad, $idsede)
    {
    	$q = Doctrine_Query::create()
	  		->select('c.*')
	 		->from('Calendarios c')
	 		->where('c.idsede = '.$idsede)
	    	->andWhere('c.idfacultad = '.$idfacultad)
	    	->andWhere('c.activo = 1')
	    	->fetchOne();
	       
        return $q;
    }   
    
    
  	public function obtenerUltimoCalendario($idfacultad, $idsede)
    {
    	$q = Doctrine_Query::create()
	  		->select('c.*')
	 		->from('Calendarios c')
	 		->where('c.idsede = '.$idsede)
	    	->andWhere('c.idfacultad = '.$idfacultad)
	    	->andWhere('c.activo = 1')
			->orderBy('c.anio DESC')
	    	->fetchOne();
	       
        return $q;
    }      
}
